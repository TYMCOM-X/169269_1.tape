


RPG VERSION 121,,0

(TSR #50770)

THE DIFFERENCES COMMAND WILL  NOW EITHER PROMPT FOR ALL  IT ARGUMENTS
(COMMAND  DIFF<RETURN>)  OR ACCEPT  ALL  ARGUMENTS ON  THE  SAME LINE
(COMMAND DIFF  {OUTPUT=}FILE1,FILE2) WHERE  THE {}'S  DENOTE OPTIONAL
ARGUMENTS.

(TSR #63583)

A NEW  SWITCH (/SEARCH) HAS  BEEN ADDED WHICH  GENERATES /-6Y  TO THE
LOADER. NOTE THAT THIS IS EQUIVALENT TO %-6Y IN THE COMMAND STRING.

ALL TRACE OF THE ABILITY TO  DO BINARY OUTPUT TO A DEVICE  OTHER THAN
THE DISK HAS BEEN REMOVED.

THE INTERNAL  ALGORITHM FOR  DETERMINING WHICH  PROCESSOR TO  USE AND
WHETHER TO RECOMPILE HAS BEEN REDONE. NO EXTERNALLY NOTICABLE EFFECTS
SHOULD  BE  OBSERVABLE  EXCEPT IN  THE  PERFORMANCE  OF  THE /FORWARD
SWITCH.

THE  /FORWARD  SWITCH  HAS BEEN  REDONE  TO  PRODUCE  MORE REASONABLE
EFFECTS.  THIS SWITCH IS USED TO INDICATE THAT THE SPECIFIED FILE MAY
NOT ACTUALLY BE  PRESENT AT THE  TIME RPG IS  RUN. THIS IS  USEFUL IF
SOME OTHER PROCESSOR (USUALL A NONSTANDARD ONE) WILL PRODUCE THE FILE
IN THE SAME COMPILE COMMAND.  AN EXAMPLE IS GIVEN BELOW. THE FILE INT
IS PRODUCED FROM THE FILE REAL BY THE SPECIAL PREPROCESSOR "PREPRC."
COM @CMD        WHERE CMD.CMD CONTAINS

INT=REAL/NONSTANDARD PREPRC
RELFIL=PARAM+INT/FORWARD+TAIL


IF THE FILE INT IS NOT FOUND, COMPILATION WILL BE FORCED BUT NO ERROR
MESSAGE (FILE NOT FOUND) WILL BE GENERATED BY RPG.

IN THE PREVIOUS VERSIONS OF  RPG, THE /FORWARD SWITCH APPLIED  TO THE
ENTIRE COMPILATION. IN THE EXAMPLE GIVEN, NO ERROR MESSAGE WOULD HAVE
BEEN GENERATED IF THE FILE  PARAM WERE NOT PRESENT. THIS  PROBLEM HAS
BEEN CORRECTED.  THE MEANING OF PERMANENT AND TEMPORARY  WITH RESPECT
TO /FORWARD ARE SLIGHTLY DIFFERENT THAN FOR OTHER SWITCHES. PERMANENT
APPLIES TO THE REST OF THE NAMES IN THIS COMPILATION RATHER  THAN FOR
THE REST OF THE COMMAND. AS AN EXAMPLE:
   A+/FORWARD B+C+D/NOFORWARD+E,F+G

THE FORWARD DECLARATION APPLIES TO FILES B,C, AND E.



TWO NEW SWITCHES HAVE BEEN ADDED, /REFERENCE AND /NOREFERENCE.  THESE
ARE USEFUL IN CONJUNCTION WITH THE /FORWARD SWITCH AND FOR PROCESSORS
WHICH CAN ACCESS FILES OTHER THAN THOSE IN THE COMMAND STRING AS SAIL
WITH THE  "REQUIRE ... SOURCE!FILE"  CONSTRUCT AND  MICRO-SYMBOL WITH
INCLUDE.  FILES WHICH HAVE  BEEN DECLARED REFERENCE, WILL  HAVE THEIR
CREATION DATES INCLUDED IN THE RECOMPILATION ALGORITHM, BUT  WILL NOT
BE PASSED TO THE PROCESSOR. THE ABOVE EXAMPLE OF THE  /FORWARD SWITCH
HAS THE  PROBLEM THAT IF  REAL HAS A  DATE LATER THAN  RELFIL, PREPRC
WILL BE  RUN ON REAL  TO PRODUCE A  NEW INT, BUT  RELFIL WILL  NOT BE
RECOMPILED. THIS CAN BE CORRECTED BY REWRITING THE COMMAND FILE AS:

INT=REAL/NONSTANDARD PREPRC
RELFIL=PARAM+INT/FORWARD+REAL/REFERENCE+TAIL


THE CREATION DATE OF REAL WILL  BE CHECKED, BUT ITS NAME WILL  NOT BE
PASSED TO THE PROCESSOR WHEN RELFIL IS RECOMPILED. THE COMMENTS ABOUT
THE MEANING  OF PERMANENT  AND TEMPORARY  SWITCHES MADE  FOR /FORWARD
APPLY TO /REFERENCE.

RPG WILL "KEEP TRACK OF" VARIOUS NONSTANDARD CONDITIONS SET  WITH THE
COMMANDS:

CTE SETPROC
CTE ADDPROC
CTE SETNONSTANDARD
CTE ADDNONSTANDARD
CTE SETDDT
CTE SETDEFAULT
CTE SETRPG


THESE CONDITIONS  MUST BE RESET  ON EACH LOGIN.  THE NEW  COMMAND CTE
MAKINI WILL CAUSE  RPG TO GENERATE THE  FILE RPG.INI. THE  FIRST TIME
RPG IS RUN AFTER  LOGGING IN, IT WILL  LOOK FOR THE FILE  RPG.INI AND
ESTABLISH THE APPROPRIATE SPECIAL DEFAULTS.

A NEW SWITCH HAS  BEEN ADDED /NSLOAD. THE  FORMAT IS THE SAME  AS THE
/NONSTANDARD SWITCH. IT FORCES  SOME PROGRAM OTHER THAN LOADER  TO BE
USED IF THIS IS  A LOAD COMMAND, ETC.  IT IS EQUIVALENT TO  USING THE
COMMAND
        CTE SETPROC LOADER=...

EXCEPT THAT  IT APPLIES  ONLY TO THIS  COMPILATION. IT  IS ESPECIALLY
USEFUL WITH NON-STANDARD PROCESSORS.

WHEN THE COMPILATION IS FOR A PROCESSOR FOR WHICH THE DEBUG SWITCH IS



SIGNIFICANT (EXCEPT SFO) I.E. SAIL, FORTRAN, FTF, RPG WILL  CHECK THE
STAUS OF THE UFD BIT (BIT 24 FROM CHANIO, BIT 9 FROM EXTENDED LOOKUP-
ENTER). IF THE BIT IS ON AND THE /DEBUG SWITCH IS NOT USED OR THE BIT
IS OFF AND THE /DEBUG SWITCH WAS USED, RPG WILL  FORCE RECOMPILATION.
THIS CURRENTLY WORKS CORRECTLY ONLY WITH SAIL.
